<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>4D Results Viewer</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div>
        <select id="dateSelect">
            {% for d in dates %}
            <option value="{{ d }}" {% if d == default_date %}selected{% endif %}>{{ d }}</option>
            {% endfor %}
        </select>
        <button id="searchBtn">Search</button>
        <div id="resultsCard"></div>
    </div>
    <script>
        document.getElementById("searchBtn").onclick = function () {
            var date = document.getElementById("dateSelect").value;
            fetch("/get_results?date=" + date)
                .then(r => r.json())
                .then(res => {
                    var c = document.getElementById("resultsCard");
                    if (res.data.length === 0) {
                        c.innerHTML = "No results.";
                        return;
                    }
                    c.innerHTML = res.data.map(d =>
                        `<div>
                            <b>Provider:</b> ${d.provider} <br>
                            <b>Draw Info:</b> ${d.draw_info} <br>
                            <b>1st:</b> ${d.first} <br>
                            <b>2nd:</b> ${d.second} <br>
                            <b>3rd:</b> ${d.third} <br>
                            <b>Special:</b> ${d.special} <br>
                            <b>Consolation:</b> ${d.consolation}
                        </div><hr>`
                    ).join("");
                });
        };
        // Auto search on page load
        document.getElementById("searchBtn").click();
    </script>
</body>
</html>
